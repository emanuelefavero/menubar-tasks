<!DOCTYPE html>
<html>
  <head>
    <title>Settings</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      :root {
        --background: rgb(234, 235, 237);
        --foreground: rgb(39, 39, 39);

        /* INPUT */
        --input: rgb(222, 223, 224);
        --input-border: 1px solid rgb(215, 216, 217);
        --input-border-bottom: var(--input-border);

        /* INPUT FOCUS */
        --input-focus-outline: 3px solid rgb(132, 163, 230);

        /* INPUT PLACEHOLDER */
        --input-placeholder: rgb(181, 181, 182);

        /* BUTTON */
        --button: #fff;
        --button-border-top: 1px solid rgb(219, 220, 222);
        --button-border-bottom: 1px solid rgb(194, 195, 197);
        --button-shadow: 0 0 0 1px rgb(228, 228, 230);
        --button-primary: linear-gradient(
          180deg,
          rgb(72, 142, 247),
          rgb(51, 121, 246)
        );
        --button-primary-text: rgb(252, 253, 255);
        --button-primary-border-top: 1px solid rgb(73, 143, 247);
        --button-primary-border-bottom: 1px solid rgb(51, 121, 246);

        /* BUTTON ACTIVE */
        --button-active: rgb(240, 240, 240);
        --button-border-top-active: 1px solid rgb(219, 220, 222);
        --button-primary-active: linear-gradient(
          180deg,
          rgb(57, 123, 227),
          rgb(41, 101, 227)
        );
        --button-primary-border-top-active: 1px solid rgb(56, 122, 227);
      }

      @media (prefers-color-scheme: dark) {
        :root {
          --background: rgb(37, 39, 42);
          --foreground: rgb(222, 222, 223);

          /* INPUT */
          --input: rgb(49, 51, 53);
          --input-border: 1px solid rgb(56, 58, 60);
          --input-border-bottom: 1px solid rgb(79, 83, 84);

          /* INPUT FOCUS */
          --input-focus-outline: 3px solid rgb(57, 103, 144);

          /* INPUT PLACEHOLDER */
          --input-placeholder: rgb(102, 104, 104);

          /* BUTTON */
          --button: rgb(92, 93, 95);
          --button-border-top: 1px solid rgb(111, 113, 114);
          --button-border-bottom: 1px solid rgb(31, 33, 35);
          --button-shadow: 0 0 0 1px rgb(35, 37, 40);
          --button-primary: linear-gradient(
            180deg,
            rgb(49, 104, 222),
            rgb(42, 93, 198)
          );
          --button-primary-text: rgb(221, 229, 247);
          --button-primary-border-top: 1px solid rgb(81, 131, 228);
          --button-primary-border-bottom: 1px solid rgb(23, 24, 27);

          /* BUTTON ACTIVE */
          --button-active: rgb(116, 117, 119);
          --button-border-top-active: 1px solid rgb(134, 135, 136);
          --button-primary-active: linear-gradient(
            180deg,
            rgb(78, 158, 235),
            rgb(70, 145, 223)
          );
          --button-primary-border-top-active: 1px solid rgb(104, 176, 240);
        }
      }

      body {
        font-family: -apple-system, system-ui, BlinkMacSystemFont, 'SF Pro',
          'San Francisco Pro', 'Helvetica Neue', Helvetica, sans-serif;
        background-color: var(--background);
        color: var(--foreground);
        padding: 1rem;
        display: flex;
        flex-direction: column;
      }

      h2 {
        font-size: 0.875rem;
      }

      label {
        font-size: 0.875rem;
        font-weight: 600;
        padding: 0;
        margin: 0;
        margin-bottom: 0.2rem;
      }

      input,
      textarea {
        width: 100%;
        margin: 0;
        padding: 0.35rem 0.35rem;
        margin-top: 0.375rem;
        border-radius: 0.43rem;
        background-color: var(--input);
        color: var(--foreground);
        border: var(--input-border);
        border-bottom: var(--input-border-bottom);
        outline: none;

        &:focus {
          outline: var(--input-focus-outline);
        }

        &::placeholder {
          color: var(--input-placeholder);
        }
      }

      .settings-container {
        padding: 0;
        margin: 0;
        margin-top: 1rem;
        display: flex;
        flex-direction: column;
        gap: 0.625rem;

        & label {
          font-weight: 400;
          display: flex;
          align-items: center;
          justify-content: space-between;
          user-select: none;
          cursor: pointer;

          & input[type='checkbox'] {
            width: 1.25rem;
            height: 1.25rem;
            margin-right: 0.5rem;
            position: relative;
            top: -0.11rem;
          }
        }
      }

      .button-container {
        padding: 0;
        margin: 0;
        margin-top: 1.25rem;
        display: flex;
        flex-direction: row;
        justify-content: flex-end;
        gap: 0.625rem;

        & button {
          min-width: 4rem;
          padding: 0.25rem 0.55rem;
          border-radius: 0.3rem;
          border: none;
          margin: 0;
          box-shadow: var(--button-shadow);
        }

        & button.secondary {
          background-color: var(--button);
          color: var(--foreground);
          border-top: var(--button-border-top);
          border-bottom: var(--button-border-bottom);

          &:active {
            background-color: var(--button-active);
            border-top: var(--button-border-top-active);
          }
        }

        & button.primary {
          background: var(--button-primary);
          color: var(--button-primary-text);
          border-top: var(--button-primary-border-top);
          border-bottom: var(--button-primary-border-bottom);

          &:active {
            background: var(--button-primary-active);
            border-top: var(--button-primary-border-top-active);
          }
        }
      }
    </style>
  </head>
  <body>
    <h2>Settings</h2>

    <div class="settings-container">
      <label class="checkbox-label">
        <input type="checkbox" id="showUndoneIcon" checked />
        <span>Show checkbox icon (◻️) for undone tasks</span>
      </label>
    </div>

    <div class="button-container">
      <button class="primary" id="saveButton">Save & Close</button>
    </div>

    <script>
      const { ipcRenderer } = require('electron')

      // When the window loads, get current settings
      window.addEventListener('DOMContentLoaded', () => {
        ipcRenderer.invoke('get-settings').then((settings) => {
          document.getElementById('showUndoneIcon').checked =
            settings.showUndoneIcon
        })
      })

      // Save button click handler
      document.getElementById('saveButton').addEventListener('click', () => {
        const settings = {
          showUndoneIcon: document.getElementById('showUndoneIcon').checked,
        }

        ipcRenderer.invoke('save-settings', settings).then(() => {
          // Close the window after saving
          window.close()
        })
      })
    </script>
  </body>
</html>
